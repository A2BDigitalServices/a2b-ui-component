<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ApplyLoan</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
    }
    .container {
        max-width: 600px;
        margin: 20px auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .form-group {
        margin-bottom: 20px;
    }
    label {
        display: block;
        font-weight: bold;
        margin-bottom: 5px;
    }
    input[type="text"], input[type="email"], input[type="tel"], select, textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
    .btn {
        display: inline-block;
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    .btn:hover {
        background-color: #0056b3;
    }
</style>
</head>
<body>

<div class="container" id="firstForm">
    <h2>Loan Application Form</h2>
    <form id="form1">
        <div class="form-group">
            <label for="firstname">First Name:</label>
            <input type="text" id="firstname" name="firstname" required>
        </div>
        <div class="form-group">
            <label for="lastname">Last Name:</label>
            <input type="text" id="lastname" name="lastname" required>
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
            <label for="phone">Phone:</label>
            <input type="tel" id="phone" name="phone" required>
        </div>
        <div class="form-group">
            <label for="address">Address:</label>
            <input type="text" id="address" name="address" required>
        </div>
        <div class="form-group">
            <label for="partnerType">Partner Type:</label>
            <select id="partnerType" name="partnerType">
                <option value="WeRize">WeRize</option>
                <option value="AnotherType">AnotherType</option>
                <option value="SomeType">SomeType</option>
            </select>
        </div>
        <div class="form-group">
            <label for="status">Status:</label>
            <select id="status" name="status">
                <option value="open" selected>Open</option>
                <option value="closed">Closed</option>
            </select>
        </div>
        <div class="form-group">
            <label for="remarks">Remarks:</label>
            <textarea id="remarks" name="remarks"></textarea>
        </div>
        <button type="button" class="btn" onclick="validateForm()">Submit</button>
    </form>
</div>

<script>
    async function validateForm() {
        var fields = document.querySelectorAll('#firstForm input, #firstForm select, #firstForm textarea');
        var valid = true;
        fields.forEach(function(field) {
            if (!field.checkValidity()) {
                valid = false;
            }
        });

        // Validate phone number length
        var phoneInput = document.getElementById('phone');
        if (phoneInput.value.length !== 10) {
            valid = false;
            alert('Phone number should be 10 digits.');
        }

        if (valid) {
            var formData = {
                firstname: document.getElementById('firstname').value,
                lastname: document.getElementById('lastname').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
                partnerType: document.getElementById('partnerType').value,
                status: document.getElementById('status').value,
                remarks: document.getElementById('remarks').value
            };

            try {
                const response = await fetch('https://a2b-login-java-microservice.onrender.com/open', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    const responseData = await response.json();
                    const referenceNumber = responseData;
                    alert('Your loan request submitted successfully. Here is your reference number: ' + referenceNumber);
					clearForm(); // Clear form fields
                } else {
                    alert('Error: Unable to submit form. Please try again later.');
                }
            } catch (error) {
                alert('Error: ' + error.message);
            }
        } else {
            alert('Please fill out all fields correctly in the form.');
        }
    }
	function clearForm() {
        document.getElementById('firstname').value = '';
        document.getElementById('lastname').value = '';
        document.getElementById('email').value = '';
        document.getElementById('phone').value = '';
        document.getElementById('address').value = '';
        document.getElementById('partnerType').value = 'WeRize'; // Reset to default
        document.getElementById('status').value = 'open'; // Reset to default
        document.getElementById('remarks').value = '';
    }
</script>

</body>
</html>
